<%= content_for :header_nav do %>
  <%= render "imports/nav", import: @import %>
<% end %>

<%= content_for :previous_path, import_confirm_path(@import) %>

<% if @import.importing? %>
  <%# Still parsing/importing %>
  <%= render "imports/importing", import: @import %>
<% elsif @import.complete? && @import.categorizing? %>
  <%# Import done but AI still categorizing - show importing view with step 3 active %>
  <%= render "imports/importing", import: @import %>
<% elsif @import.complete? && @import.categorization_done? %>
  <%# Fully complete - show success %>
  <%= render "imports/success", import: @import %>
<% elsif @import.complete? %>
  <%# Complete but no categorization status yet - treat as still processing %>
  <%= render "imports/importing", import: @import %>
<% elsif @import.failed? %>
  <%= render "imports/failure", import: @import %>
<% elsif @import.revert_failed? %>
  <%= render "imports/revert_failure", import: @import %>
<% else %>
  <%= render "imports/ready", import: @import %>
<% end %>
